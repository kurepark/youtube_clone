(()=>{const e=document.getElementById("videoContainer"),t=document.getElementById("commentForm"),n=document.querySelector(".comments_box"),d=n.querySelector(".comments_btn_delete"),a=async e=>{const t=e.target.parentElement,n=t.dataset.id;t.remove(),await fetch(`/api/comments/${n}/delete`,{method:"DELETE"})};t&&t.addEventListener("submit",(async n=>{n.preventDefault();const d=t.querySelector("textarea");t.querySelector("button");let o=d.value;const c=e.dataset.videoid,m=await fetch(`/api/videos/${c}/comment`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({text:o})});if(201===m.status){d.value="";const{newCommentId:e,commentUser:t}=await m.json();((e,t,n)=>{const d=document.querySelector(".comments_box ul"),o=document.createElement("li"),c=document.createElement("div"),m=document.createElement("img"),i=document.createElement("div"),r=document.createElement("p"),l=document.createElement("button");o.appendChild(c),o.dataset.id=t,m.src=`/${n.avatarUrl}`,m.style.width="45px",m.style.height="45px",c.appendChild(m),i.innerText=`${n.username}`,o.appendChild(i),r.innerText=`${e}`,o.appendChild(r),l.className="comments_btn_delete",l.innerText="✖️",l.addEventListener("click",a),o.appendChild(l),d.prepend(o)})(o,e,t)}})),n&&d.addEventListener("click",a)})();