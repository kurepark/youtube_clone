(()=>{const e=document.querySelector("video"),t=document.getElementById("play"),n=document.getElementById("mute"),d=(document.getElementById("time"),document.getElementById("currentTime")),u=document.getElementById("totalTime"),l=document.getElementById("timeline"),i=document.getElementById("volumn"),m=document.getElementById("fullScreen"),o=document.getElementById("videoContainer"),r=document.getElementById("videoControls");let a=.5,s=null,c=null;e.volume=a;const v=e=>new Date(1e3*e).toISOString().substring(11,19),E=()=>{r.classList.remove("showing")};t.addEventListener("click",(n=>{e.paused?(t.innerText="Pause",e.play()):(t.innerText="Play",e.pause()),t.innerText=e.paused?"Play":"Pause"})),n.addEventListener("click",(t=>{e.muted?e.muted=!1:e.muted=!0,n.innerText=e.muted?"Unmute":"Mute",i.value=e.muted?0:a})),i.addEventListener("input",(t=>{const{target:{value:d}}=t;e.muted&&(e.muted=!1,n.innerText="Mute"),a=d,e.volume=d})),e.addEventListener("loadedmetadata",(t=>{u.innerText=v(Math.floor(e.duration)),l.max=Math.floor(e.duration)})),e.addEventListener("timeupdate",(t=>{d.innerText=v(Math.floor(e.currentTime)),l.value=Math.floor(e.currentTime)})),l.addEventListener("input",(t=>{const{target:{value:n}}=t;e.currentTime=n})),m.addEventListener("click",(e=>{document.fullscreenElement?(document.exitFullscreen(),m.innerText="Enter Full Screen"):(o.requestFullscreen(),m.innerText="Exit Full Screen")})),e.addEventListener("mousemove",(e=>{s&&(clearTimeout(s),s=null),c&&(clearTimeout(c),c=null),r.classList.add("showing"),c=setTimeout(E,3e3)})),e.addEventListener("mouseleave",(e=>{s=setTimeout(E,3e3)})),e.addEventListener("ended",(e=>{const{videoid:t}=o.dataset;fetch(`/api/videos/${t}/view`,{method:"POST"})}))})();