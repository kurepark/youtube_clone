extends ../base.pug
include ../mixins/video


block content 
    div#videoContainer(data-videoid=video.id)
        video(src=`/${video.fileUrl}` controls)
        div#videoControls
            button#play Play 
            button#mute Mute 
            input(type="range" value="0.5" step="0.2" min="0" max="1")#volumn
            div#time 
                span#currentTime 00:00:00
                span /
                span#totalTime 00:00:00
            div 
                input(type="range" step="0.1" value="0" min="0" )#timeline
            div 
                button#fullScreen Enter Full Screen

    div
        p=video.description 
        small=video.createdAt
    div 
        small uplaoded by
            a(href=`/users/${video.owner._id}`)=video.owner.name

    hr
    if loggedInUser && (String(video.owner._id) === String(loggedInUser._id))
        a(href=`${video.id}/edit`) Edit video &rarr;
        br
        a(href=`${video.id}/delete`) Delete video &rarr;
    if loggedInUser
        div 
            form#commentForm
                textarea(cols="30" rows="10" placeholder="write comment")
                button(type="submit") Add comment

    div.comments_box 
        ul.comments_list 
            each comment in video.comments.reverse() 
                li(data-id=comment.id)
                    div 
                        div.comments_thumb     
                        if loggedInUser.avatarUrl.includes("github")
                            img(src=`${video.owner.avatarUrl}` width="45" height="45")
                        else
                            img(src=`/${video.owner.avatarUrl}` width="45" height="45")
                        div.comments_name=video.owner.username
                        p.comments_text=comment.text
                    button.comments_btn_delete ✖️
block scripts 
    script(src="/static/js/videoPlayer.js")
    script(src="/static/js/commentSection.js")